<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Page Not Found - Redirecting...</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 2em; line-height: 1.6; color: #333; text-align: center; }
    h1 { color: #007bff; }
    p { font-size: 1.1em; }
    a { color: #007bff; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { max-width: 600px; margin: 50px auto; padding: 20px; background-color: #f8f9fa; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  </style>
  <script>
    (function() {
      const REPO_NAME = "cms-rfi-collab"; // Configure this for your specific GitHub repository name
      const repoPathPrefix = "/" + REPO_NAME.toLowerCase() + "/"; // e.g., "/cms-rfi-collab/"
      
      let currentFullPth = window.location.pathname; // Path that caused the 404
      let siteBasePath = "/"; // Default for sites at the root of a domain
      let pathForFragmentExtraction = "";

      if (REPO_NAME && currentFullPth.toLowerCase().startsWith(repoPathPrefix)) {
        // This is a GitHub Project page, and the path includes the repo name
        siteBasePath = "/" + REPO_NAME + "/"; // Maintain original casing for repo name in redirect
        pathForFragmentExtraction = currentFullPth.substring(siteBasePath.length);
      } else {
        // Site is at the root of the domain, or path doesn't include the repo prefix
        // (e.g. custom domain, or user/org page like username.github.io)
        pathForFragmentExtraction = currentFullPth.startsWith('/') ? currentFullPth.substring(1) : currentFullPth;
      }

      // Clean the extracted path to create a fragment
      let fragment = pathForFragmentExtraction;
      if (fragment.endsWith('.html')) {
        fragment = fragment.substring(0, fragment.length - '.html'.length);
      }

      // If fragment becomes 'index' or '404' (e.g. from /repo/index.html or /repo/somepath/404.html),
      // or if it's empty, we want to redirect to the base of the site.
      // Also handle cases like "path/to/index"
      const lastSegment = fragment.substring(fragment.lastIndexOf('/') + 1);
      if (lastSegment === 'index' || lastSegment === '404') {
         fragment = fragment.substring(0, fragment.lastIndexOf('/')); // Get path up to "index" or "404"
      }
      
      if (fragment === '' || fragment === '/') { // If fragment is now empty or just a slash
        fragment = ''; // Redirect to site base (e.g. /repo/ or /)
      } else if (fragment.endsWith('/')) { // Clean trailing slash if any from "path/to/"
         fragment = fragment.substring(0, fragment.length -1);
      }

      // Construct the final redirect URL
      let redirectTargetUrl = siteBasePath + (fragment ? '#' + fragment : '');
      
      window.location.replace(window.location.origin + redirectTargetUrl);

    })();
  </script>
</head>
<body>
  <div class="container">
    <h1>Page Not Found</h1>
    <p>We couldn't find the page you were looking for.</p>
    <p>We are attempting to redirect you to the correct part of the site. If you are not redirected automatically, please <a href="./">click here to go to the homepage</a>.</p>
  </div>
</body>
</html>
